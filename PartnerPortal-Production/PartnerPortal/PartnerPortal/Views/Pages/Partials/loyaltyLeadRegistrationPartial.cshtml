
<style>
    .clsTextBoxOpportunity {
        min-height: 50px !important;
        font-size: 20px !important;
    }
    .btnLanding {
        background-color: #21459A;
        border: none;
        color: #FFFFFF;
        text-align: center;
        -webkit-transition-duration: 0.4s;
        transition-duration: 0.4s;
        margin: 10px 0 !important;
        text-decoration: none;
        font-size: 16px;
        cursor: pointer;
        height: 40px;
        width: 150px;
    }
    .invalidated {
        border-bottom: 1px solid #FF0208 !important;
        background-color: #FFBABC !important;
    }
</style>

<div style="width: 100%;">
    <div class="fusion-fullwidth fullwidth-box" style="text-align: left; background-color:#111c4e;background-repeat:no-repeat;background-position:left top;border:0px solid ;padding-top:50px;padding-bottom:50px;padding-left:50px;padding-right:50px;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;" id="">
        <div class="fusion-row">
            <div>
                <div style="text-size-adjust: auto; font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt;"><span style="color: #ffffff; font-family: Arial, Helvetica, sans-serif; text-align: justify;">Star Micronics values our partnerships and understands that we are only successful when our partners are successful. Our loyalty benefits offer dedicated marketing and business development activities to help us grow our businesses together.</span></div>
                <div style="caret-color: #000000; font-family: Helvetica; text-size-adjust: auto; font-size: 12pt;">                   
                    <div style="text-align: justify;"><span style="color: #ffffff; font-family: Arial, Helvetica, sans-serif;">Register today to unlock your loyalty benefits!</span></div>
                </div>
            </div>
        </div>
    
</div>

</div>
<div style="width: 100%; " ng-controller="StarMdfRequestController">
    <div class="fusion-fullwidth fullwidth-box" style="text-align: left; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover; " id="form1">
        <div style="padding-left: 20px;">
            <div style="width: 100%; height: 30px; color: #2551A4; margin-top: 40px; font-size: 22pt; font-weight: bold;">
                Loyalty Lead Registration
            </div>

            <div style="width: 100%; margin-top: 20px; clear: both;">
                <div style="width: 250px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">Company Name</div>
                <div style="width: 500px;  float: left; display: table-cell; vertical-align: middle;">
                    <input class="clsTextBoxOpportunity" style="width: 100%;" readonly="readonly" placeholder="Company Name" type="text" value="" ng-model="Account.AccountName">
                </div>
            </div>
            <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
            <div style="width: 100%; margin-top: 20px; clear: both;">
                <div style="width: 250px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">Empower Partner Number (EPN)</div>
                <div style="width: 500px;  float: left; display: table-cell; vertical-align: middle;">
                    <input class="clsTextBoxOpportunity" style="width: 100%;" readonly="readonly" placeholder="Empower Partner Number (EPN)" type="text" value="" ng-model="Account.PartnerNumber">
                </div>
            </div>
            <div style="width: 100%; margin-top: 20px; clear: both; height: 30px;"></div>
            <div style="width: 100%; height: 20px;">
                <span style="color: #2551A4; font-size: 14pt; font-weight: bold;">Main Loyalty Contact Info</span>
            </div>
            <div style="width: 100%; height: 30px;">
                <span style="color: #2551A4; font-size: 10pt; font-weight: bold;">The person will be responsible for managing loyalty program responsibilities. We suggest this is a marketing employee.</span>
            </div>

            <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
            <div style="width: 100%; margin-top: 20px; clear: both;">
                <div style="width: 250px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">First Name *</div>
                <div style="width: 500px;  float: left; display: table-cell; vertical-align: middle;">
                    <input class="clsTextBoxOpportunity" style="width: 100%;" placeholder="First Name" type="text" value="" ng-model="LoyaltyInfo.FirstName">
                </div>
            </div>
            <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
            <div style="width: 100%; margin-top: 20px; clear: both;">
                <div style="width: 250px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">Last Name *</div>
                <div style="width: 500px;  float: left; display: table-cell; vertical-align: middle;">
                    <input class="clsTextBoxOpportunity" style="width: 100%;" placeholder="Last Name" type="text" value="" ng-model="LoyaltyInfo.LastName">
                </div>
            </div>
            <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
            <div style="width: 100%; margin-top: 20px; clear: both;">
                <div style="width: 250px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">Email Address *</div>
                <div style="width: 500px;  float: left; display: table-cell; vertical-align: middle;">
                    <input class="clsTextBoxOpportunity" style="width: 100%;" placeholder="Email Address" type="text" value="" ng-model="LoyaltyInfo.EmailAddress">
                </div>
            </div>
            <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
            <div style="width: 100%; margin-top: 20px; clear: both;">
                <div style="width: 750px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">How do you want Star to support you? (Please select all that apply) *</div>
                <div style="width: 750px;  float: left; display: table-cell; vertical-align: middle;margin:5px;margin-top:15px;margin-bottom:15px;">
                    <span style="display:inline-block;width:500px;float:left;"><input type="checkbox" style="width:30px;height:30px;cursor:pointer;" class="starSupportOptions" data-val="Brand awareness (PR, social, blog)" /> Brand awareness (PR, social, blog)</span>
                    <span style="display:inline-block;width:300px;float:left;"><input type="checkbox" style="width:30px;height:30px;cursor:pointer" class="starSupportOptions" data-val="Lead Generation" /> Lead Generation</span>
                    <span style="display:inline-block;width:300px;float:left;"><input type="checkbox" style="width:30px;height:30px;cursor:pointer" class="starSupportOptions" data-val="Shows and events" /> Shows and events</span>
                    <span style="display:inline-block;width:300px;float:left;"><input type="checkbox" style="width:30px;height:30px;cursor:pointer" class="starSupportOptions" data-val="Marketing Funds" /> Marketing Funds</span>
                    <span style="display:inline-block;width:200px;float:left;"><input type="checkbox" style="width:30px;height:30px;cursor:pointer" class="starSupportOptions" data-val="Other" ng-model="HowToSupportStarOtherSelected" /> Other</span>
                </div>
                <div style="width: 100%; margin-top: 20px; clear: both;" ng-show="HowToSupportStarOtherSelected">
                    <div style="width: 500px; padding-left: 0px; color: #000000; float: left; padding-top: 15px; min-height: 10px;  font-size: 12pt;">If other, please explain</div>
                    <div style="width: 770px;  float: left; display: table-cell; vertical-align: middle;">
                        <input class="clsTextBoxOpportunity" style="width: 100%;" placeholder="Explanation" type="text" ng-model="LoyaltyInfo.HowToSupportStarOtherExplanation">
                    </div>
                </div>
            </div>
            <div style="display:none" id="TechnologyPartnerSpecificContent">
                <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
                <div style="width: 100%; margin-top: 20px; clear: both;" id="technologyPartnerFields">
                    <div style="width: 750px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">Please list all the Star products that you support</div>
                    <div style="width: 770px;  float: left; display: table-cell; vertical-align: middle;">
                        <input class="clsTextBoxOpportunity" style="width: 100%;" placeholder="Star products that you support" type="text" value="" ng-model="LoyaltyInfo.AllStarProducts">
                    </div>
                </div>
                <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
                <div style="width: 100%; margin-top: 20px; clear: both;" id="technologyPartnerFields">
                    <div style="width: 750px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">Do you sell hardware?</div>
                    <div style="width: 770px;  float: left; display: table-cell; vertical-align: middle;">
                        <select ng-model="LoyaltyInfo.DoYouSellHardware" style="width: 100%; padding: 5px;padding-left: 15px; font-size: 11pt; height: 50px; border: 1px solid #d2d2d2; cursor: pointer;">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                </div>
                <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
                <div style="width: 100%; margin-top: 20px; clear: both;" id="technologyPartnerFields">
                    <div style="width: 750px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">If not, how do your customers source their hardware?</div>
                    <div style="width: 770px;  float: left; display: table-cell; vertical-align: middle;">
                        <select ng-model="LoyaltyInfo.CustomerSourceForHardware" style="width: 100%; padding: 5px;padding-left: 15px; font-size: 11pt; height: 50px; border: 1px solid #d2d2d2; cursor: pointer;">
                            <option value="">--None--</option>
                            <option value="Reseller">Reseller</option>
                            <option value="Online seller">Online seller</option>
                            <option value="Marketplace (Amazon, Ebay, etc.)">Marketplace (Amazon, Ebay, etc.)</option>
                            <option value="Don't Know">Don't Know</option>
                        </select>
                    </div>
                </div>
            </div>
            <div style="display:none" id="ServicePartnerSpecificContent">
                <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
                <div style="width: 100%; margin-top: 20px; clear: both;">
                    <div style="width: 750px; padding-left: 20px; background-color: #2699FB; float: left; padding-top: 15px; min-height: 35px; color: #ffffff; font-size: 12pt;">Please list all the Star products that you are currently selling:</div>
                    <div style="width: 770px;  float: left; display: table-cell; vertical-align: middle;">
                        <input class="clsTextBoxOpportunity" style="width: 100%;" placeholder="Star products that you support" type="text" value="" ng-model="LoyaltyInfo.AllStarProductsSelling">
                    </div>
                </div>

            </div>


            <div style="width: 100%; margin-top: 20px; clear: both; height: 30px;"></div>
            <div style="width: 100%; height: 30px;">
                <span style="color: #2551A4; font-size: 10pt; font-weight: bold;">By clicking "I Agree", you agree to Star Micronics Privacy Policy and Terms of Use. This may include product related emails..</span>
                <div style="width: 770px;  float: left; display: table-cell; vertical-align: middle;">
                    <span style="display:inline-block;width:500px;float:left;color: #2551A4;"><input type="checkbox" style="width:30px;height:30px;color: #2551A4;cursor:pointer;" ng-model="LoyaltyInfo.AgreedToPrivacyTerms" /> I Agree</span>
                </div>
            </div>
            <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
            <div style="width: 100%; margin-top: 20px; clear: both; text-align: left;">
                <input type="button" name="addOpportunity" class="btnLanding" value="Next" ng-click="GoToTermsPage()">
            </div>
            <br /><br /><br /><br /><br /><br />
        </div>

    </div>
    <div class="fusion-fullwidth fullwidth-box" style="text-align: left; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover;display:none;" id="form2">
        <div style="width: 100%; height: 30px; color: #2551A4; margin-top: 40px; font-size: 22pt; font-weight: bold;margin-bottom:20px;text-align:center;">
            Loyalty Lead Registration
        </div>
        <div style="width: 100%; height: 30px; color: #2551A4; margin-top: 20px; font-size: 14pt; font-weight: bold;margin-bottom:20px;text-align:center;">
            Terms And Conditions
        </div>
        <div style="padding-left: 20px;text-align:justify;font-family:Arial, Helvetica, sans-serif;font-size:12pt;font-weight:normal;color: #2551A4;">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;THIS LOYALTY PROGRAM ADDENDUM (“ADDENDUM”) IS ENTERED INTO BETWEEN YOU, THE PARTNER RESELLER (THE “PARTNER”) AND STAR MICRONICS AMERICA, INC. (“STAR”) AND GOVERNS YOUR PARTICIPATION IN THE STAR LOYALTY MARKETING PROGRAM DESCRIBED IN THIS ADDENDUM (“THE LOYALTY PROGRAM”). BY CLICKING THE “I AGREE” BUTTON INDICATING YOUR ACCEPTANCE OF THIS ADDENDUM, YOU AGREE TO ALL OF THE TERMS OF THIS ADDENDUM. IF YOU ARE ENTERING INTO THIS AGREEMENT ON BEHALF OF A COMPANY, YOU REPRESENT THAT YOU HAVE THE AUTHORITY TO BIND SUCH ENTITY AND ITS AFFILIATES TO THESE TERMS AND CONDITIONS, IN WHICH CASE THE TERMS “YOU”, “YOUR” OR “PARTNER” SHALL REFER TO SUCH ENTITY AND ITS AFFILIATES.
        </div>
        <div style="padding-left: 20px;text-align:justify;font-family:Arial, Helvetica, sans-serif;font-size:12pt;font-weight:bold;margin-top:20px;">
            <ol style="text-align:justify;font-family:Arial, Helvetica, sans-serif;font-size:12pt;font-weight:normal;margin-top:20px;line-height:20pt;color: #2551A4;">
                <li style="margin-bottom:10px;">Purpose. This Addendum is subject to that certain Reseller Program Agreement ("Program Agreement") between the Star and Partner. Capitalized terms used in this Addendum but not defined herein have the meanings given to such terms in the Program Agreement. This Addendum shall be deemed attached to, and is part of, the Program Agreement. Except as specifically provided herein, this Addendum does not change the terms of the Program Agreement, but does supplement the Program Agreement to provide additional terms related to Partner’s participation in the Loyalty Program. All other terms and conditions of the Program Agreement shall remain in full force and effect. </li>
                <li style="margin-bottom:10px;">Eligibility; Enrollment and Acceptance. To participate in the Loyalty Program, Partner must be enrolled in the Partner Program. To apply for the Loyalty Program, Partner must submit the Loyalty Program application. Admission into the Loyalty Program is determined by Star in its sole discretion.</li>
                <li style="margin-bottom:10px;">Loyalty Program Tiers & Scope. Once a Partner is admitted to the Loyalty Program, it will be assigned to one of the following levels applicable to the Loyalty Program:  Bronze, Silver, Gold, and Platinum, or such other levels that Star may establish from time to time (each a “Partner Tier”).  Partner’s Partner Tier will determine the type and scope of obligations which Partner shall fulfill to remain at such level as well as the benefits to which Partner is entitled. During its participation in the Loyalty Program, the Partner may be reassigned to a different Partner Tier by Star. Star will notify Partner of its new Partner Tier via the Partner Portal on or before the effective date of such reassignment. The exact type and scope of obligations required and benefits offered under each Partner Tier shall be as set forth in the Loyalty Program Policies. Partners who do not remain in compliance with the criteria for the Loyalty Program may be removed from the Loyalty Program by Star in its sole discretion.]</li>
                <li style="margin-bottom:10px;">Partner Portal and Policies. Partner acknowledges that it has read and agrees to comply with the Loyalty Program terms and conditions, policies and guidelines (“Loyalty Program Policies”) made available to Partner through the Partner Portal, found at <a href="https://bit.ly/2SNIggt">https://bit.ly/2SNIggt</a>, which are deemed to be “Program Policies” as defined in the Program Agreement.</li>
            </ol>
        </div>
        <div style="width: 100%; margin-top: 20px; clear: both; height: 10px;"></div>
        <div style="width: 100%; margin-top: 20px; clear: both; text-align: left;">
            <input type="button" name="AGREE" class="btnLanding" value="I Agree" ng-click="SaveData(true)">
            <input type="button" name="disAGREE" class="btnLanding" value="I Disagree" ng-click="SaveData(false)">
            <input type="button" name="print" class="btnLanding" value="Print" ng-click="PrintTerms()">
        </div>
    </div>
    <div style="width: 100%; height: 500px; opacity: .5; display: inline-block; position: absolute; top: 0; left: 0; z-index: 99;" ng-show="showProcessing">
        <div style="font-size: 22pt; height: 80px; padding-top: 200px;">
            <img src="~/Images/processing10.gif" />

        </div>
    </div>
</div>

    <style>
        textarea::-webkit-input-placeholder {
            color: #aaa9a9;
        }

        textarea:-moz-placeholder { /* Firefox 18- */
            color: #aaa9a9;
        }

        textarea::-moz-placeholder { /* Firefox 19+ */
            color: #aaa9a9;
        }

        textarea:-ms-input-placeholder {
            color: #aaa9a9;
        }

        textarea::placeholder {
            color: #aaa9a9;
        }
    </style>
    <script>

    $(document).ready(function () {
        $(".rightPanelContainer").hide();
    });
    function validateEmail(email) {
        var re = /^(([^<>()[\]\\.,;:\s@@\"]+(\.[^<>()[\]\\.,;:\s@@\"]+)*)|(\".+\"))@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    }
        app.controller("StarMdfRequestController", function ($controller, $scope, $http, $sce,
            notificationFactory, $location,
            validationFactory, filterFilter, helperFactory, dbUtilFactory) {

            $scope.showProcessing = false;
            $scope.Account = {};
            $scope.LoyaltyInfo = {};

            $scope.inIt = function () {
                $scope.LoyaltyInfo = {};
                $scope.LoyaltyInfo.FirstName = "";
                $scope.LoyaltyInfo.LastName = "";
                $scope.LoyaltyInfo.EmailAddress = "";
                $scope.LoyaltyInfo.HowToSupportStarOtherExplanation = "";
                $scope.HowToSupportStarOtherSelected = false;
                $scope.LoyaltyInfo.HowToSupportStar = "";
                $scope.LoyaltyInfo.AllStarProducts = "";
                $scope.LoyaltyInfo.DoYouSellHardware = "";
                $scope.LoyaltyInfo.CustomerSourceForHardware = "";
                $scope.LoyaltyInfo.AllStarProductsSelling = "";
                $scope.LoyaltyInfo.AgreedToPrivacyTerms = false;
                $scope.LoyaltyInfo.AcceptTerms = false;

                $scope.LoyaltyInfo.DataToPost = {};
                $scope.LoyaltyInfo.DataToPost.Loyalty_Contact_Name__c = "";
                $scope.LoyaltyInfo.DataToPost.Loyalty_Contact_Email__c = "";
                $scope.LoyaltyInfo.DataToPost.How_do_you_want_Star_to_support_you__c = "";
                $scope.LoyaltyInfo.DataToPost.If_other_please_explain_support__c = "";
                $scope.LoyaltyInfo.DataToPost.All_Star_products_that_you_support__c = "";
                $scope.LoyaltyInfo.DataToPost.Do_you_sell_hardware__c = "";
                $scope.LoyaltyInfo.DataToPost.Customer_source_their_hardware__c = "";
                $scope.LoyaltyInfo.DataToPost.All_Star_products_currently_selling__c = "";
                $scope.LoyaltyInfo.DataToPost.Loyalty_Agreement__c = false;

            };
            $scope.inIt();

            $scope.getAccount = function () {
                dbUtilFactory.get(root + 'api/ppcmsapi/GetAccountFromSessionData/', "", function (d) {
                    $scope.Account = d;
                    if (d.PartnerType.toLowerCase().indexOf("technology") >= 0 || d.PartnerType.toLowerCase().indexOf("services") >= 0) {
                        if (d.PartnerType.toLowerCase().indexOf("technology") >= 0) {
                            $("#TechnologyPartnerSpecificContent").show();
                        } else if (d.PartnerType.toLowerCase().indexOf("services") >= 0) {
                            $("#ServicePartnerSpecificContent").show();
                        }
                    }
                }, '', 'Error getting data ');

                dbUtilFactory.get(root + 'api/ppcmsapi/GetLoyaltyLeadLocally/', "", function (d) {
                    $scope.LoyaltyInfo.FirstName = d.FirstName;
                    $scope.LoyaltyInfo.LastName = d.LastName;
                    $scope.LoyaltyInfo.EmailAddress = d.Email;
                    $scope.LoyaltyInfo.HowToSupportStarOtherExplanation = "";
                    $scope.HowToSupportStarOtherSelected = false;
                    if (d.HowToSupportStarOther != null) {
                        $scope.LoyaltyInfo.HowToSupportStarOtherExplanation = d.HowToSupportStarOther;
                        $scope.HowToSupportStarOtherSelected = true;
                    }
                    $scope.LoyaltyInfo.HowToSupportStar = d.HowToSupportStar;
                    $scope.LoyaltyInfo.AllStarProducts = d.ProductsThatSupport;
                    $scope.LoyaltyInfo.DoYouSellHardware = d.DoesSellHardware;
                    $scope.LoyaltyInfo.CustomerSourceForHardware = d.HardwareSource;
                    $scope.LoyaltyInfo.AllStarProductsSelling = d.ProductsThatSell;
                    $scope.LoyaltyInfo.AgreedToPrivacyTerms = d.AgreedToNewsLetter;
                    $scope.LoyaltyInfo.AcceptTerms = d.TermsAgreed;
                    
                    $scope.LoyaltyInfo.DataToPost.Loyalty_Contact_Name__c = $scope.LoyaltyInfo.FirstName + " " + $scope.LoyaltyInfo.LastName;
                    $scope.LoyaltyInfo.DataToPost.Loyalty_Contact_Email__c = $scope.LoyaltyInfo.EmailAddress;
                    $scope.LoyaltyInfo.DataToPost.How_do_you_want_Star_to_support_you__c = $scope.LoyaltyInfo.HowToSupportStar;
                    $scope.LoyaltyInfo.DataToPost.If_other_please_explain_support__c = $scope.LoyaltyInfo.HowToSupportStarOtherExplanation;
                    $scope.LoyaltyInfo.DataToPost.All_Star_products_that_you_support__c = $scope.LoyaltyInfo.AllStarProducts;
                    $scope.LoyaltyInfo.DataToPost.Do_you_sell_hardware__c = $scope.LoyaltyInfo.DoYouSellHardware;
                    $scope.LoyaltyInfo.DataToPost.Customer_source_their_hardware__c = $scope.LoyaltyInfo.CustomerSourceForHardware;
                    $scope.LoyaltyInfo.DataToPost.All_Star_products_currently_selling__c = $scope.LoyaltyInfo.AllStarProductsSelling;
                    $scope.LoyaltyInfo.DataToPost.Loyalty_Agreement__c = $scope.LoyaltyInfo.AcceptTerms;
                    $scope.LoyaltyInfo.DataToPost.Loyalty_Member_Status__c = "Requested";

                    
                    if (d != null && d.FirstName != null) {
                        $("#form1").hide();
                        $("#form2").show();
                    }
                    else {
                        $("#form1").show();
                        $("#form2").hide();
                    }


                }, '', 'Error getting data ');

            };
            $scope.getAccount();

            $scope.PrintTerms = function () {
                var redUrl = '@Url.Content("~/Resources/Documents/LoyaltyTermsAndConditions.pdf")';
                window.open(redUrl);
            }
            $scope.GoToTermsPage = function () {

                if ($scope.LoyaltyInfo.FirstName == "") {
                    swal({
                        title: "Error",
                        text: "Please provide first name.",
                        type: "error"
                    });
                    return false;
                }
                if ($scope.LoyaltyInfo.LastName == "") {
                    swal({
                        title: "Error",
                        text: "Please provide last name.",
                        type: "error"
                    });
                    return false;
                }
                if ($scope.LoyaltyInfo.EmailAddress == "") {
                    swal({
                        title: "Error",
                        text: "Please provide email.",
                        type: "error"
                    });
                    return false;
                } else if (!validateEmail($scope.LoyaltyInfo.EmailAddress)) {
                    swal({
                        title: "Error",
                        text: "Please provide valid email.",
                        type: "error"
                    });
                    return false;
                }
                var strSupportOptions = '';
                $(".starSupportOptions").each(function () {
                    if ($(this).is(":checked")) {
                        if ($(this).attr("data-val") != "Other") {
                            strSupportOptions += $(this).attr("data-val") + "; ";
                        }
                    }
                })
                if ($scope.HowToSupportStarOtherSelected) {
                    if ($scope.LoyaltyInfo.HowToSupportStarOtherExplanation == "") {
                        swal({
                            title: "Error",
                            text: "Please provide explanation for (How do you want Star to support you?).",
                            type: "error"
                        });
                        return false;
                    }
                    //else {
                    //    strSupportOptions += $scope.LoyaltyInfo.HowToSupportStarOtherExplanation;
                    //}
                //} else {
                }
                strSupportOptions = strSupportOptions.substring(0, strSupportOptions.length - 2);
                $scope.LoyaltyInfo.HowToSupportStar = strSupportOptions;

                $scope.LoyaltyInfo.DataToPost.Loyalty_Contact_Name__c = $scope.LoyaltyInfo.FirstName + " " + $scope.LoyaltyInfo.LastName;
                $scope.LoyaltyInfo.DataToPost.Loyalty_Contact_Email__c = $scope.LoyaltyInfo.EmailAddress;
                $scope.LoyaltyInfo.DataToPost.How_do_you_want_Star_to_support_you__c = $scope.LoyaltyInfo.HowToSupportStar;
                $scope.LoyaltyInfo.DataToPost.If_other_please_explain_support__c = $scope.LoyaltyInfo.HowToSupportStarOtherExplanation;
                $scope.LoyaltyInfo.DataToPost.All_Star_products_that_you_support__c = $scope.LoyaltyInfo.AllStarProducts;
                $scope.LoyaltyInfo.DataToPost.Do_you_sell_hardware__c = $scope.LoyaltyInfo.DoYouSellHardware;
                $scope.LoyaltyInfo.DataToPost.Customer_source_their_hardware__c = $scope.LoyaltyInfo.CustomerSourceForHardware;
                $scope.LoyaltyInfo.DataToPost.All_Star_products_currently_selling__c = $scope.LoyaltyInfo.AllStarProductsSelling;
                $scope.LoyaltyInfo.DataToPost.Loyalty_Agreement__c = "";
                $scope.LoyaltyInfo.DataToPost.Loyalty_Member_Status__c = "Requested";

                //$scope.showProcessing = true;
                dbUtilFactory.postp(root + 'api/ppcmsapi/SaveLoyaltyLeadLocally/', $scope.LoyaltyInfo, function () {                    

                }, '', 'Error getting data ');
                $("#form1").hide();
                $("#form2").show();
                return true;
            };

            $scope.SaveData = function (isAgree) {
                $scope.LoyaltyInfo.AcceptTerms = isAgree;
                $scope.LoyaltyInfo.DataToPost.Loyalty_Agreement__c = isAgree ? "I Agree" : "I Disagree";

                $scope.showProcessing = true;
                dbUtilFactory.postp(root + 'api/ppcmsapi/SaveLoyaltyLeadLocally/', $scope.LoyaltyInfo, function () {
                    var redUrl = '@Url.Content("~/Pages/Dashboard")';
                    swal({
                        title: "Done",
                        text: "Data Saved Successfully.",
                        type: "success"
                    }).then(function () {
                        $scope.showProcessing = false;
                        window.location.href = redUrl;
                    });
                }, '', 'Error getting data ');




                return true;
            };


        });
    </script>
